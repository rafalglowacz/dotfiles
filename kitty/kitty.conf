# vim:ft=kitty

# Appearance
font_family      monofur
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size 17
text_composition_strategy 1.7 30
hide_window_decorations yes
macos_titlebar_color background
macos_show_window_title_in none
macos_menubar_title_max_length 100
bell_on_tab ""

## Cursor
shell_integration no-cursor
cursor_beam_thickness 2.25
cursor_stop_blinking_after 0
cursor_text_color background

## Borders
draw_minimal_borders yes
window_border_width 3px

## Spacing
window_padding_width 10.0
window_margin_width 0
single_window_margin_width 0 3 0

## Tab bar
tab_bar_edge top
tab_bar_style fade
tab_powerline_style slanted
tab_bar_background black
tab_bar_margin_color black

active_tab_font_style normal
active_tab_foreground black
active_tab_background #fafafa
inactive_tab_foreground #cccccc
inactive_tab_background black

# Features

## Startup/shutdown
# startup_session laradock.session
confirm_os_window_close -1
allow_remote_control yes

## Scrollback
scrollback_lines 20000
scrollback_pager $SHELL -c '~/bin/nvimpager -c "normal G" -c "set nowrap" -c "set colorcolumn="'

## Windows
enabled_layouts splits,stack
placement_strategy top-left

# Keymap
action_alias hints kitten hints --hints-text-color red --hints-background-color white --hints-foreground-color black

map ctrl+shift+p>f       hints --type path --program -
map  cmd+shift+p>f       hints --type path --program -
map ctrl+shift+p>ctrl+f  hints --type path --program @
map  cmd+shift+p>cmd+f   hints --type path --program @
map ctrl+shift+p>shift+f hints --type path
map  cmd+shift+p>shift+f hints --type path
map ctrl+shift+p>l       hints --type line --program -
map  cmd+shift+p>l       hints --type line --program -
map ctrl+shift+p>ctrl+l  hints --type line --program @
map  cmd+shift+p>cmd+l   hints --type line --program @
map ctrl+shift+p>w       hints --type word --program -
map  cmd+shift+p>w       hints --type word --program -
map ctrl+shift+p>ctrl+w  hints --type word --program @
map ctrl+shift+p>h       hints --type hash --program -
map  cmd+shift+p>h       hints --type hash --program -
map ctrl+shift+p>ctrl+h  hints --type hash --program @
map  cmd+shift+p>cmd+h   hints --type hash --program @
map ctrl+shift+p>n       hints --type linenum
map  cmd+shift+p>n       hints --type linenum
map ctrl+shift+p>y       hints --type hyperlink
map  cmd+shift+p>y       hints --type hyperlink
map ctrl+shift+space     hints --type regex --regex '[\w./-]{5,}' --program -
map  cmd+shift+space     hints --type regex --regex '[\w./-]{5,}' --program -
map ctrl+alt+space       hints --type regex --regex '[\w./-]{5,}' --program @
map  cmd+alt+space       hints --type regex --regex '[\w./-]{5,}' --program @

map ctrl+shift+j neighboring_window left
map ctrl+shift+l neighboring_window right
map ctrl+shift+k neighboring_window down
map ctrl+shift+i neighboring_window up

map cmd+shift+j neighboring_window left
map cmd+shift+l neighboring_window right
map cmd+shift+k neighboring_window down
map cmd+shift+i neighboring_window up

map ctrl+shift+alt+i move_window up
map ctrl+shift+alt+j move_window left
map ctrl+shift+alt+k move_window down
map ctrl+shift+alt+l move_window right

map cmd+shift+alt+i move_window up
map cmd+shift+alt+j move_window left
map cmd+shift+alt+k move_window down
map cmd+shift+alt+l move_window right

map ctrl+shift+z toggle_layout stack
map cmd+shift+z toggle_layout stack
map ctrl+\ toggle_layout horizontal
map ctrl+= toggle_layout vertical
map cmd+\ toggle_layout horizontal
map cmd+= toggle_layout vertical
map ctrl+space>space next_layout

map ctrl+page_up   previous_tab
map ctrl+page_down next_tab

map ctrl+shift+c copy_to_buffer a
map  cmd+shift+c copy_to_buffer a
map ctrl+shift+v paste_from_buffer a
map  cmd+shift+v paste_from_buffer a
map       ctrl+v paste_from_clipboard
map        cmd+c copy_and_clear_or_interrupt 
map       ctrl+c copy_and_clear_or_interrupt 

map cmd+a        send_text all \x01
map cmd+b        send_text all \x02
map cmd+e        send_text all \x05
map cmd+f        send_text all \x06
map cmd+g        send_text all \x07
#map cmd+k        send_text all \x0b
map cmd+y        send_text all \x19
map cmd+d        send_text all \x04
map cmd+r        send_text all \x12 
map cmd+u        send_text all \x15
map cmd+y        send_text all \x19
map cmd+z        send_text all \x1a
map cmd+/        send_text all \x1f

map ctrl+space>r load_config_file

map cmd+shift+escape kitty_shell window

action_alias my_new_window_with_cwd launch --title current --cwd current zsh
map kitty_mod+enter my_new_window_with_cwd
map cmd+shift+enter my_new_window_with_cwd

map cmd+shift+r start_resizing_window
map cmd+shift+t new_tab

map f1 launch --type overlay --stdin-add-formatting --stdin-source=@last_visited_cmd_output $SHELL -c '~/bin/nvimpager -c "normal G" -c "set nowrap" -c "set colorcolumn="'
map f2 launch --type overlay --stdin-add-formatting --stdin-source=@screen_scrollback       $SHELL -c '~/bin/nvimpager -c "normal G" -c "set nowrap" -c "set colorcolumn="'

action_alias my_show_last_out launch --stdin-source=@last_cmd_output --stdin-add-formatting
action_alias my_show_last_out_overlay my_show_last_out --type overlay

map ctrl+f2 my_show_last_out $SHELL -c '~/bin/nvimpager -c "normal G" -c "set nowrap" -c "set colorcolumn="'

map ctrl+shift+g my_show_last_out_overlay $SHELL -c '~/bin/nvimpager -c "normal G" -c "set nowrap" -c "set colorcolumn="'
map cmd+shift+g  my_show_last_out_overlay $SHELL -c '~/bin/nvimpager -c "normal G" -c "set nowrap" -c "set colorcolumn="'

map alt+shift+up scroll_to_prompt -1
map alt+shift+down scroll_to_prompt 1
# Clear screen with Kitty's command but also send Ctrl+L. This allows screen 
# clearing to work as expected without losing Ctrl+L in Vim.
# Kitty's default config says that mapping an escape code to Ctrl+L in ZSH
# should allow controlling how to clear the screen. `printf "\e[H\e[2J"` looked
# promising but for me the cursor moved to the top but the output stayed 
# in place.
map ctrl+l combine ; clear_terminal scroll active; send_text all \x0c
map cmd+l  combine ; clear_terminal scroll active; send_text all \x0c

map f3 create_marker
map shift+f3 remove_marker
map ctrl+f3 scroll_to_mark prev
map cmd+f3  scroll_to_mark prev
map ctrl+shift+f3 scroll_to_mark next
map cmd+shift+f3  scroll_to_mark next

map cmd+shift+page_up   scroll_page_up
map cmd+shift+page_down scroll_page_down

map alt+apostrophe launch --location=vsplit
map alt+= launch --location=hsplit

mouse_map cmd+alt+left triplepress ungrabbed mouse_selection line_from_point

# map cmd+shift+z send_text all \x1a fgn \r

# BEGIN_KITTY_THEME
# Catppuccin-Latte
include current-theme.conf
# END_KITTY_THEME

include light-theme.conf

include overrides.conf
